sudo: required
services:
- docker
addons:
  apt:
    packages:
    - python3
    - python3-pip
before_install:
- sudo pip3 install --upgrade pip
- sudo pip3 install --upgrade invoke-tools
env:
  global:
    - secure: Ngt973I4brOFkWhQ9w3PfSEQ2I3RUy2wBDpp5qyDcYLDC7CDfOq/nebgXNvFL7/I+rtGJYxXMLj+ZVPHC270PxpPhGzeYMq2fJ6MHG+BA4kHqyWJ4EhIOKPO6weWP7IJ6Qb+z1UdgnBdMWVNyB47tmcBfVQ1gmBK/5J7Ryn6JgY1FYdIvXeV5kWndDQCuC1dguUfdBDaCC7w1KjfCTYGIFRx6I4zDPSBcClTzmT60+ip2U3i7KIqGIG9JEC8GKWiuD25vysY8Ezh28NIlTo34Fkm70l9Ii63BPkbJG7TI4yFomaVOaSwGWMsWNaPj+Q+XFfEYCNc28IJnhBAfV68sN6xdW9wCZEShfGPvzvW5qiI7uo+xVWaB5a5Q2xhGWM1XV0TEoVcpLwnxzJz++8HtrXw/IClQ/C9JxSOjIGU6hW3aDs8jR2vQymTlekCw5ZyzJofumI9HERTERTEj94vokZK7RNRan0qbUkptcE0mraTXJ7xZ1LbemrWBHGxSzUpLUUU/uNRMFm9b3FqfKfiw3Ib1bxTb6LiTp0nPhsgWoAQQGDfvk1hMyEMkdfT+M/w3iBQtH18rtrIjbRXiH2GerEFkdMpMHIqalGOgIHpwi/k9IDX2FrxTf8Vmy5Y4iMLqn5k6+TztJXLKtGiC7rqO4aPuE6K/XGNCPJP1pnNqa8=
    - secure: puVpzLttujyTDXArl8wiqqW9PLJlFMVB14LmL0k33Tr4CNOCU86LSax445DB+VFiiIy7vmA4MHCdqG94JOVQ73vjdALPWzD/1i04vavYFRDXEd1KyV9bmzKALT70LPlwBbnFCUdsPdPdBbhZKOuKLouuqgYpoSrPyqCfUin/GA5z+bxOY5cm1bxSHMEY9JKUguvJwhCHPYH8Zl+aEM/L8eHWKEFU79/7lw9DJ1dTgvuRkMVNan+q27yjHZyZAgCkbfu4ZavG2DkeY7V6tMRqvWvB9GclX7OD7MmveOaSd5odYkRiBHQDBVxuZeXuOTufd3tGWnyl3sA1kLgC8TBtubyYOowqjVPCWyL2Bj8wSHLUWo1aaqZ9ssO72HNXidq/clL3MoOnI+Jjw19rDZslEqZEIcLMkTfM4SLt0Mp/iz//V1Q8D4TMKhTd6uhmjGQX4kHQvX9n6Pac7rP4nacAoX9UdcBBz+j6zx2VM7rKYbqdSJyMwYe2oqSrJzdeots63EAY1O+HweMjoI4kn7wApXOyZYxWYgLJHcv/gL/JevHCtyxlv9fwPinp6O04ehEsVBV3qwOPSJukDckdla1jnaKjegZykoCIyaGasI43L9p1uwAGZk1SAO7aPM7Em6LFM90EdN8MrN/vd31tJZszQfv65AFNbC16taYDj/pCeXs=
    - secure: lgf8EHEhMFS/LHm59qbRokxUfLGaklNZy+ndkXsYU+/kZS+QiCR2F/o/bENlvtQqoRVI9DxsM8F0P7wgfjf0DQm4Wzu+e6KMkfSPT+KBahz6gFTWsCnymBjfKS4pPmiwMFVgrxq54MgdAiTx2Rr84RG5rfdnAnUeyifv42q+uj+C5WXBbxXSguhNe8Y/YuJygvIIR0T7Ue7v1ZR618yHX46HWdQksrv9knNY1ITrfEfbxlbFiKFc5tT875Smuk2vbWYBKDLzHxt9d8JaUGjy0ynSjlsyneJSGtLqaUM/MN8hZj0qHzHgiheeCtrVrnxdhyvG2sJNCWE9+WlHBMkk2d5HkrXN6bCx+qNshcdhTLKvnBJxTOjCZSRumAv2CMPKiOUeDQIiVgn0k5CDbO15CXGVnqnywWbLBsHo44G0QRLCL4jHSI25p7EdfvDj0fZTdCs2K4B1t8a126ENbYMS9yPA+MSb20iWT+KAzJje+8MbrE4PkBgNvk/FHmGQVd6wACa0grgi0RIRkmJ/WVk+86BEBl55tZZku38HL9Y4CfpzcIuD8aMhjUS85BmEVLRak8xf4l6MIslXbCignoznzORL9WTmneBuWebPOuBFmBXLHCetkV/+lK2t28pfxETBjTpUkul2dxo4bTKpxhCyNtAN7yjRFisRp4rA89+WttE=
    - secure: jRs9engVsFRdQrxCQatgF/EutlQ9FqPUS0FyCfTzCcb2u13bfuHvIiPgGxRxY4DlnIswQwS2XW4ifWLWecghp4meIMOzFRp+RTPAt1safNv8otDjoI0mA+G97av/GmjJeZTgWBxwuW/PM56vNKLgSUrpMEjiHyYEfhgkJ01z+lRImDye2V3hkB6oWL/odSeBIO/WTUsoaeLyZpoCh5XfvwMJz8mlB4l/hJs3IIPnPNo1McdSC1wDe7svsGVeBnsfSSI6g4uMDUae8iNGb4mGzuxACYIf6/wlp0D2xmPUfcuUPWjfV722faHyHQtF+wOa5Rsxb2w5AhXKdlHldzNsOQ1pwHG/DJxT/Yd1jj9JTETE2HSyq3BX4C8CD+Eot+mxd1WxstoozjsVeQQYHv+5vcwtB9SYRab8Ju8E6w3IkSM9Vi0QIpBwqNnZWZdBIPexyoxNoklhx9JIafLB7byZF7b1ni1vHGBlgabqdRee/BOYGFvd7vPwGxu0RbcRUDGaLX4eoRRPlWvcfJGd7+WrjoLyufzFlmeXfYr4ByeZ6VLOpGHvPffmgj9yFbOTx0iq07FH++VxozMhoHDkHU7VW25qP2Itnu4w77g4M2jFBHLukWhIItNtawFml2G5kHH9Z2SvROgKR5sU4VuVNMFE0PTdyBsD+jDwiPyhE/dLxMk=
    - secure:  b8zW6mj6DGOv+Ku/xNpVmE1a3bg+24P+1+ZNSQ4QLnelb3wvmbhbXxCvEBKboQTY0/pwBaWGFxOtBKDhcYOQa4rnIpzl7otOTaBxfkXRUh6w0nFz3UlMBpKs2BWH1me9lZk/h5s1C11a3S5JBi5DXq8EXO+ZEExDuyjzSgzF8hd/ifDNGfEyYQ5eY/YLSPLccaKvf7PqtmxiM61+OcFKJqMzI9Mq8e4UuXSQ+Vf9p/8QYXpTStoUU1yWD+2NdFNPJmw5tiXR1hBMu/NautfOFQgvJzA3MejKJldi0f5mrk1qWi10vzVBNve4gd7LM+NcrE8uqwEESxNJZLy6SoGbxooji7yRzeIQol0pfw1jAljJ6oyDtXFMKn8YeJC+iI4cBCtZFRSJcGi9NtLBpx81Iq/s5WKljpXJfD739kirpscmmRRuBarV/AmQG8B+OiO0FG/smEJ89yEylfdrJMzpnuqB7cqq4X2rP9Y4+60kQPYJNPuvOl9zYTp8Ouv8yrm5yl4WAxHSUy+WTQyk5Qq5tOQYL3W+q1kbgnTOYKlTjmhJi4arYrVaDHVuC2pI30Z1b/2eG0sYwxqEASM0U9U7ilhOvcpc3tiij7prWs75id6r2ODRqu4F37xyqmqaFbJt3jDORIWL+1ARM8R4qhkORsQj0Mu1tjeksmeFiLTkzU8=
    - secure: VTQcGjtHFtwOinfL7faDawdY0zU6DEHdSXNcPV0B1+5YXJyU/WqMRYhOGWfG3/3t3/zJVWu+TOCXthNhunMFZsP2kqr4po6wsvOwBt2t7rfC2KgZwhb9SNwk8SEXN4ONO1MYeVxBFUc3GUm9wT4eVNXddJORUioSjyOQzZoy8KCZlkRMKTCUyR+xJwbHlbO+wfYrZWCK8Q01uTtFSZ0ad0NEzR9fGFcG1wU9Y3Y6ecwOuNiWg2cqZc/UJRtMCAu6jbckt0LCIrZvYSPZJ1LmNuqrKJ9PpRKwbVpAZMqW+0C0hirS+sZCKanSA6BMpd4yNnjKwWuYymnjisBcnHvzPNaYMQ7ZmVKeTYyrEtzcAxGFzSGbao5c76XVlrr7Ob4CwOSHXq3299qeCK5V/Tfrw40dAOSWUkjHXCwMdRlvAngUhwr7nmRcAw+JpLsf4lXZ7AQswgYWtNn53bS0LE9OSlHmHZq3FKi+gaJ4hvHdaX7V3LYx6lIvuyiRUGMH7O09NtXoPbZA4OutxHl3H/QAJNUqzj/Hhzr+O1IJSTsG0zWPeMVbo/b18r/+GtRXM2c+YLr76zbQwkJ+XQwRZL4od+kcHHIgY1isnRn94WoApkoil3/l3wi7Sbyy7pOTHxcbDIzaRcYZ7q9GUF+bwnOAVgYyJhTSOZBj62H0+wiPA1g=
    - secure: QeKx97qDyGx9Zx7EPCuupoCaTmUjJgwhk/8IEcm0jFtvNvpEDym3lP0l3ZJ+jx1kSS52xcC6+HFCKtEdp4RdZ/HFa1um4pz46UZmV0ZQhCgBqeJlcOMZHmtUSeCcUfXDzP6J0CYbaguLoUxmZJX4BxebSeA1o/+l2RqwO8hSsKjZQ9jtfVLScISoc84LYzuoLGjH3yWOvuDsB9xyUNqSnfztJzv8Oye9BJj81+fzCLqbsWSSxfFiCHm9SjRduftkXl5I/4+3nu/J2C4GqkwY/RUof2toDGnUpa/UTlHTRFUhMq7I8jQclHnVUhFvexFQLTZnjCMNS2bHuQ2Alh5dllSUO4KJNfAcq5YCMHXW8/reT5fDLpKDDJOy5IhOELPInNXMFanM4Z1na6cQbvSgRUeXtiKC8+0ftNr5tQ1bVSlFmVwypzNPPy6jH/Ttt3d/UQMixTR7BWj+4h2zOCEFv0sMEoQkWh3Nu9WleaetxxeUsGDUSWRMXsHqlc50nj5IgyHfOnVgjeVnFzpN1Vwc2em5KGz9pWy3lArjSKv+VKicMiN6kRA7G7Rd51aHw7oUZWJtUHCM4+JP4Sc6IlkqOazNpt4oAOrTFweO3nziAhpsGcxDQB+d0HyJFjHoAYiGTiM9KQjqUhBmfDooKsIhjpYbICYLS45UYbTy7kjv8sw=
    - secure: hXNrgUm3EfNkaZuVw+qEnQS9RKCBpopVXo0nj8nh+S0D2AWEjY11RfwvWuUDI0BjHJGUCAdOYwCTxrKZU9q9DXBxrACu5IX+5n6pQ/8EvdI5Ye+1YVTsxcYm8Ja9re2oInaVzhrHFPlHhYx5VM20MGZkv2nrU31eLsCeQ/ozgIVAm21Dt+ElBgZLUK0Phl0hw3eaYfQZmLq6FDvRygnK9Yl7rQhPVNT/gcIbTtUym96LczeIsGds2NhSC9CEV+NvjaY1B6CQWmK+Mk6RBXwXUQz5PNVMEh2WhPpVcAWLZ0v0Egfg76cz2NvGbMY0S1uYIownmHuFS3bXvaRUnNWXwpH5fGgblnVKxhhiHZkSWJFYIpgmMVflDHLZdatgp4mMwoyjP6cMKjuwKoJYJKAgdB09wvYW5Jvt0g5++ea56xXxYEjp9vU6OvcsQ25kJBKjlce8hFoIKXp/a0E8OOgvTpy/sgpLG4jCxBOec1rwq3yIq85IqfkbIJjoNL8nTSOtLkmhRGAStMyjBO7FJjbXvMPRZvh44k1hn8W90mR09fiE43FM1aKgrKd75Uz5hmMNquUWioEsQLhO99ArYFdk0YWQ9WaGKUjufQ5rU+Q/PVYrJ6cQh82b2D2UzkvCOF8c8Ajfyq70rG7BxrWhKPfLgVy8+t8F663Jb9mjca2KvZ4=
    - secure: nWlVDYAO0Lk/62+cIaXtNt5yn00pj/GCoXSj8AKpIKCG61+pAhY15Ohz4N+3VDK4B5O0vD3Pu9fZDHK9tOJCMjQ2V6SYX3BaJOppU5AE8B1RLIMxZLRi8/yPWfHYRIVXmVWCccX/Lmm6uawgPgBk6Yq6YLylMTRFq4A7AXutuF7jdcKPV49HlhMfVL9/bTc0zQQpumRa335SDEAB2YfFs+tEpsljs0T4npaaiDVv6nfYQuoNZTsQ8+WC2LanHJcYpE+A6EXq64uovghHE9Xw0umsOP5mKiQUpdR+PAQgcRxayXy98m+a4MYOq25EVcyJXaaXf9npLQMGjwnMTtecTbWXqctaeVPvMGSmGhBUvvxN2ZhP+qO259rjoSMIDnKjsKWuXQT/hUmANvXlXaHFsr96Fi/ywfpOqiNr+XeBshzLz4mIvYL5+OH/+/5isLA5ErBx6srVjdjd8VRg7o81+TynIE41tNyJ/30nMElsGL6SDaPF+eL9qjpxC23fGfs835SS4PmHQiwHNgJ859PBJEAP5VpypbsSRjilubMPIObxU3Qfq1B4fiyIV/7APbYbo8svRReBsmN+7Wn2xdMfRFWgHlyBdkFWXYKZfNCQm0qqlXRxFiohxo77kvbiGdBKdEmQ1O4DEkVUbalfgV6+sgBk6X6/mHe3HiI0TJ/SGSc=
  matrix:
    - SERVICE=backend
    - SERVICE=java_client
    - SERVICE=android_client
script:
  - cd ${TRAVIS_BUILD_DIR}/${SERVICE} && invoke test
after_success:
  - cd ${TRAVIS_BUILD_DIR}/${SERVICE} && invoke publish_test_artifacts && invoke build && invoke deploy
after_failure:
  - cd ${TRAVIS_BUILD_DIR}/${SERVICE} && invoke publish_test_artifacts
notifications:
  slack:
    secure: sqUz8hUcNVeYI68HblkG1O5/Lltf3fR6dPehr4u1IGNiEqThMtB19BTRkrjraGJZ93nvyj6dGmyP6g2GGyUnqgCwtCP/sFh35DefxLyb2iArwreuw8dp4vODGwMjNZvd5rtgWPT4WVcx6HQSwUQc9L6Fp7nOpjdRtpoFL8bUnF4nDZJGvPLVHfYfpPEWAtINJxXJjUHgarxZiFWB30KF6Wl/gTYrDu/p5MbL4AXtBb6XLkBoBmDKtdFnOyTqL4Zq2sYhy98v4d1pagC+1evj58DAnWLdTzAfKbXjn9kicUmmKNV2/f8x62SVpV+4OMgzA2XAPGTOQgyeplXbXFst+iHNREdSdX0w2gJcB3PitWJGtK7+wBtVjOjSH6OXXavELHvqIFRIW54u9PjoPIOKwgN1N+ZakKQCKjPBcRzoS5nPuiJjGivCSSUGbCELzenZJv9JwpZGfJMK1SszpszrWWhrQ6hCEeVRxixV6DzkWlamQk6V1ee5a15pDXFhjDrnjh+Y/6VxtVxPusABRepul7rFRrETvxlU8oR9znV9MJOny4xt79lSLgzDjizUbVTWV4dEi8nHXzYnA1bTlF8SwUdyGIYTJK8ii7KGnIq6kJd8ZCfwXKsus7y/LqSqmDTB8CJRr8M7BYsYcvqKLteAKGfy506eZFCOH+wV4Si8wh0=
  on_success: always
  on_failure: always
